<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>RC Beverages Dashboard</title>
  <link rel="stylesheet" href="style.css" /> <!-- Link to the external CSS file -->
</head>

<body>
  <!-- Header Section with Page Title -->
  <header>
    <h1>RC Beverages Dashboard</h1>
  </header>

  <!-- Welcome Message Section -->
  <div class="welcome-message" id="welcome">
    <!-- Welcome message will be injected here -->
  </div>

  <!-- Button Container -->
  <div class="button-container" id="dashboard-sections">
    <!-- Buttons will be dynamically populated here -->
  </div>

  <footer>
    <button class="footer-btn" onclick="location.href='dashboard.html'">Back to Dashboard</button>
    <button class="footer-btn" onclick="location.href='journeyplanners.html'">Journey Planner</button>
    <button class="footer-btn" onclick="location.href='reminders.html'">Reminders</button>
    <button class="footer-btn" onclick="location.href='portfolio.html'">Portfolio</button>
  </footer>

  <script>
    // Get username and role from localStorage
    const username = localStorage.getItem("username");
    const role = localStorage.getItem("role");

    // Display welcome message
    document.getElementById("welcome").textContent = `Welcome ${username}`;

    // Define button data with role assignment
    const buttonData = [
      {
  "CRM Tools": [
    { "label": "Add Customer", "href": "add_customer.html", "roles": ["Admin"] },
    { "label": "Store Database", "href": "store_database.html", "roles": ["Admin"] },
    { "label": "Email Database", "href": "email_database.html", "roles": ["Admin", "Marketing"] },
    { "label": "Journey Planners", "href": "journey_planners.html", "roles": ["Admin", "Sales"] },
    { "label": "Reminders", "href": "reminders.html", "roles": ["Admin", "Sales"] },
    { "label": "Asset Management", "href": "asset_management.html", "roles": ["Admin", "Warehouse"] }
  ],
  "Orders & Visits": [
    { "label": "Wholesaler Portals", "href": "wholesalers.html", "roles": ["Admin", "Sales"] },
    { "label": "Pre-Orders", "href": "preorders.html", "roles": ["Admin", "Sales"] },
    { "label": "Visit History / Logs", "href": "visit_logs.html", "roles": ["Admin", "Sales"] },
    { "label": "Route Planner", "href": "route_planner.html", "roles": ["Admin", "Sales"] },
    { "label": "Suggested Next Visit", "href": "suggested_visits.html", "roles": ["Admin", "Sales"] }
  ],
  "Marketing and Promotions": [
    { "label": "Email Campaign Manager", "href": "email_campaigns.html", "roles": ["Admin", "Marketing"] },
    { "label": "Promotions", "href": "promotions.html", "roles": ["Admin", "Marketing"] }
  ],
  "Data & Analytics": [
    { "label": "Store Performance", "href": "store_performance.html", "roles": ["Admin", "Sales"] },
    { "label": "Gap Targets", "href": "gap_targets.html", "roles": ["Admin", "Sales"] },
    { "label": "Activation Targets", "href": "activation_targets.html", "roles": ["Admin", "Sales"] }
  ],
  "Resources": [
    { "label": "Portfolio", "href": "portfolio.html", "roles": ["Admin", "Marketing"] },
    { "label": "Trade Presenters", "href": "presenters.html", "roles": ["Admin", "Marketing"] },
    { "label": "Price Lists", "href": "price_lists.html", "roles": ["Admin", "Sales"] },
    { "label": "Training", "href": "training.html", "roles": ["Admin", "Sales"] }
  ],
  "Warehouse": [
    { "label": "Inbound / Receiving", "href": "inbound.html", "roles": ["Admin", "Warehouse"] },
    { "label": "Outbound / Dispatch", "href": "dispatch.html", "roles": ["Admin", "Warehouse"] },
    { "label": "Returns / Waste", "href": "returns.html", "roles": ["Admin", "Warehouse"] },
    { "label": "View Stock Levels", "href": "stock_levels.html", "roles": ["Admin", "Warehouse"] },
    { "label": "Low Stock Alerts", "href": "low_stock.html", "roles": ["Admin", "Warehouse"] },
    { "label": "Low Code Stock Alerts", "href": "low_code_stock.html", "roles": ["Admin", "Warehouse"] }
  ],
  "Settings": [
    { "label": "Add User", "href": "add_user.html", "roles": ["Admin"] },
    { "label": "Delete User", "href": "delete_user.html", "roles": ["Admin"] },
    { "label": "Change User Password", "href": "change_password.html", "roles": ["Admin"] },
    { "label": "Change User Role", "href": "change_role.html", "roles": ["Admin"] }
  ]
}


    // Create buttons dynamically based on user role
    const buttonContainer = document.getElementById("dashboard-sections");

    buttonData.forEach(button => {
      // Check if the user's role is allowed for the button
      if (button.roles.includes(role)) {
        const btnElement = document.createElement("a");
        btnElement.classList.add("btn");
        btnElement.textContent = button.label;
        btnElement.href = button.href;
        buttonContainer.appendChild(btnElement);
      }
    });
  </script>
</body>

</html>
