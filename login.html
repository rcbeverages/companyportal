<script>
  async function login() {
    const username = document.getElementById("username").value.trim();
    const password = document.getElementById("password").value.trim();

    console.log("Typed Username:", username);
    console.log("Typed Password:", password);

    const response = await fetch("https://sheetdb.io/api/v1/6t9yz1xgzgc7s/search?Username=" + username + "&_nocache=" + Date.now());
    const users = await response.json();

    console.log("Fetched Users:", users);

    if (users.length === 0) {
      alert("Username not found.");
      return;
    }

    const correctPassword = users[0].Password;
    const fullName = users[0].FullName;
    const role = users[0].Role;

    console.log("Stored Password:", correctPassword);
    console.log("Stored Role:", role);
    console.log("Stored FullName:", fullName);

    if (correctPassword === password) {
      localStorage.setItem("username", username);
      localStorage.setItem("role", role);
      localStorage.setItem("fullname", fullName);
      alert("Login successful!");
      window.location.href = "dashboard.html";
    } else {
      alert("Password is incorrect.");
    }
  }
</script>
